name: ðŸŒ‘ Crear rama altar-log (una sola vez)

on:
  workflow_dispatch:

permissions:
  contents: write

jobs:
  crear_altar_log:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸª¶ Clonar el repositorio
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ðŸŒ‘ Crear rama altar-log huÃ©rfana
        env:
          ALTAR_TOKEN: ${{ secrets.ALTAR_TOKEN }}
          REPO: ${{ github.repository }}
        run: |
          echo "ðŸª¶ Creando rama altar-log desde cero..."
          git checkout --orphan altar-log
          git rm -rf .
          mkdir -p data
          echo "[]" > data/revivir_log.json
          git add data/revivir_log.json
          git commit -m "ðŸŒ‘ Rama altar-log inicializada (solo logs)"
          git push -f https://x-access-token:${ALTAR_TOKEN}@github.com/${REPO}.git altar-log
          echo "âœ… Rama altar-log creada exitosamente."
