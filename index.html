<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Mictl√°n F√≠lmico</title>

<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="apple-touch-icon.png">  
  
<link rel="stylesheet" href="https://unpkg.com/98.css" />
<style>
  body {
    background: radial-gradient(circle at 50% 65%, #3b0057 0%, #1a0622 45%, #0b0b0b 100%);
    font-family: "MS Sans Serif", sans-serif;
    color: #000;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  .desktop {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 40px;
    gap: 35px;
  }

  .icon {
    cursor: pointer;
    width: 96px;
    height: 96px;
    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;
  }
  .icon img { width: 96px; height: 96px; image-rendering: pixelated; display: block; }
  .icon:hover { transform: scale(1.05); filter: brightness(1.15); }

  /* üåø Ventanas con animaci√≥n org√°nica (todas excepto errorBox) */
  .window {
    position: fixed;
    top: 6%;
    left: 50%;
    transform: translateX(-50%) scale(0.98);
    background-color: #C0C0C0;
    width: min(90%, 700px);
    border: 2px solid #808080;
    border-top: 2px solid #FFF;
    border-left: 2px solid #FFF;
    border-radius: 3px;
    display: none;
    box-shadow: 6px 6px 0 #00000055;
    z-index: 10;
    animation: growDown 0.35s ease-out;
    transform-origin: top center;
  }
  @keyframes growDown {
    0% { opacity: 0; transform: translateX(-50%) translateY(-10px) scale(0.97); }
    100% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
  }

/* üíÄ Error del alma: ahora aparece igual que las dem√°s */
#errorBox {
  top: 6%;
  left: 50%;
  transform: translateX(-52%) scale(0.96);
  width: 300px;
  animation: growDown 0.35s ease-out;
  transform-origin: top center;
}

  @keyframes floatDown {
    0% { opacity: 0; transform: translateX(-50%) translateY(-15px) scale(0.9); }
    100% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
  }

  .window-header {
    display: flex; justify-content: space-between; align-items: center;
    background: linear-gradient(to bottom, #000080, #000060);
    color: #fff; padding: 4px 8px; font-weight: bold;
  }
  .window-close {
    background: #C0C0C0; border: 2px outset #fff; width: 22px; height: 22px;
    text-align: center; cursor: pointer; color: #000; font-weight: bold; line-height: 18px;
  }
  .window-close:hover { background: #ff4040; color: #fff; }
  .window-content { padding: 10px; }

  .taskbar {
    position: fixed; bottom: 0; left: 0; width: 100%; background: #C0C0C0; height: 40px;
    display: flex; align-items: center; justify-content: space-between; padding: 0 20px; font-size: 14px;
    border-top: 2px solid #FFF; border-left: 2px solid #FFF; border-right: 2px solid #808080; border-bottom: 2px solid #808080;
    z-index: 20;
  }
  .btn-back {
    border: 1px solid #000; padding: 2px 8px; background: #E0E0E0; cursor: pointer;
    box-shadow: inset 1px 1px #FFF, inset -1px -1px #808080; font-size: 14px;
  }
  .clock-display {
    font-weight: bold; background: #E0E0E0; border: 1px solid #808080;
    border-top: 1px solid #FFF; border-left: 1px solid #FFF; margin-right: 45px; border-radius: 2px; min-width: 70px; text-align: center; padding: 3px 8px;
  }

  .trash-fixed { position: fixed; bottom: 65px; right: 25px; text-align: center; cursor: pointer; width: 96px; height: 120px; z-index: 5; }
  .trash-fixed img { width: 96px; height: 96px; image-rendering: pixelated; }

  .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 9; }

  /* ‚ú® Pulso + video */
  .flash {
    position: fixed; inset: 0;
    background: radial-gradient(circle, rgba(255,140,0,0.8) 0%, rgba(255,210,60,0.8) 40%, white 100%);
    animation: heartSync 4.8s ease-in-out forwards; z-index: 9999;
  }
  @keyframes heartSync {
    0% {opacity: 0;}
    5% {opacity: .95;}
    15% {opacity: 0;}
    30% {opacity: .95;}
    40% {opacity: 0;}
    55% {opacity: 1; background: white;}
    100% {opacity: 1; background: white;}
  }
  .flash.hold { opacity: 1!important; background: white!important; animation: none!important; }

  iframe.video-frame {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 10000;
    display: none; animation: fadeInVideo 1s ease-in forwards;
  }
  @keyframes fadeInVideo { from {opacity: 0;} to {opacity: 1;} }

  /* üéûÔ∏è Posters grid vertical (16-bit) */
  .poster-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px; justify-items: center;
  }
  .poster-icon { text-align: center; cursor: pointer; }
  .poster-icon img {
    width: 220px; height: auto; aspect-ratio: 3/4; object-fit: cover;
    border: 2px solid #333; border-radius: 3px; image-rendering: pixelated;
    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;
  }
  .poster-icon img:hover { transform: scale(1.05); filter: brightness(1.15); }
  .poster-icon p { margin-top: 6px; font-size: 14px; text-align: center; }

  /* üåü Bot√≥n Revivir grande */
  .btn-revivir {
    display: inline-block; padding: 12px 28px; font-size: 18px; font-weight: bold;
    background: #E0E0E0; border: 2px outset #fff; box-shadow: inset 2px 2px #FFF, inset -2px -2px #808080;
    cursor: pointer; margin-top: 12px;
  }
  .btn-revivir:hover { background: #ffd54f; }

/* ‚öôÔ∏è Ajustes globales para m√≥viles */
html, body {
  touch-action: manipulation;
  -webkit-text-size-adjust: 100%;
  overflow-x: hidden;
}

/* üì± Ajustes responsivos refinados para m√≥viles (sin zoom y con alineaci√≥n compacta) */
@media (max-width: 768px) {
  body {
    font-size: 14px;
  }

  .desktop {
    display: grid;
    grid-template-columns: 1fr 1fr; /* dos columnas, pero usamos solo la primera */
    padding: 10px 15px;
    width: 100%;
    row-gap: 10px; /* reduce la separaci√≥n vertical */
  }

  /* todos los iconos van en la columna izquierda */
  .desktop .icon {
    grid-column: 1;
    justify-self: start;
    margin-bottom: 5px; /* espacio justo entre iconos */
    width: 60px;
    height: 60px;
    margin-bottom: 8px; /* espacio justo entre iconos */
    width: 75px;
    height: 75px;
  }

  .icon img {
    width: 60px;
    height: 60px;
    width: 75px;
    height: 75px;
  }

  /* columna fantasma derecha (solo mantiene la sensaci√≥n visual) */
  .desktop::after {
    content: "";
    grid-column: 2;
    width: 100%;
    height: 100%;
  }

  .window {
    width: 95%;
    top: 4%;
  }

  .poster-grid {
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 10px;
  }

  .poster-icon img {
    width: 120px;
  }

  .btn-revivir {
    padding: 10px 22px;
    font-size: 18px;
  }

  .taskbar {
    height: 35px;
    font-size: 12px;
    padding: 0 8px;
  }

  .clock-display {
    min-width: 60px;
    font-size: 12px;
  }

  .trash-fixed {
    bottom: 55px;
    right: 15px;
    width: 64px;
    height: 80px;
  }

  .trash-fixed img {
    width: 64px;
    height: 64px;
  }
}

/* üúÇ Logo central del altar ‚Äî visible, centrado y con respiraci√≥n doble */
body::before {
  content: "";
  position: fixed;
  top: 48%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 75vw;
  height: 75vw;
  max-width: 880px;
  max-height: 880px;
  background: url("assets/logo-mictlan.png") no-repeat center center;
  background-size: contain;
  opacity: 0.7; /* üåï inicia visible al 70% */
  filter: brightness(1.25) contrast(1);
  pointer-events: none;
  z-index: 0;
  animation: respiracionLogo 14s ease-in-out infinite;
}

/* üì± Versi√≥n m√≥vil ‚Äî logo grande, inmersivo y org√°nico */
@media (max-width: 768px) {
  body::before {
    top: 45%;                /* leve desplazamiento hacia abajo */
    left: 60%;                /* üëâ desplaza ligeramente hacia la derecha */
    width: 87vw;            /* ocupa todo el fondo y un poco m√°s */
    height: 87vw;
    opacity: 0.6;            /* m√°s suave para que no opaque los √≠conos */
    animation: respiracionLogo 12s ease-in-out infinite;
    filter: brightness(1.2) contrast(1);
  }
}


/* ‚ú® Animaci√≥n con doble latido */
@keyframes respiracionLogo {
  0% {
    opacity: 0.60;
    transform: translate(-50%, -50%) scale(1);
    filter: brightness(1.1) contrast(0.9);
  }
  25% {
    opacity: 0.85;
    transform: translate(-50%, -50%) scale(1.02);
    filter: brightness(1.3) contrast(1);
  }
  50% {
    opacity: 0.75;
    transform: translate(-50%, -50%) scale(1);
    filter: brightness(1.15) contrast(0.95);
  }
  75% {
    opacity: 0.88;
    transform: translate(-50%, -50%) scale(1.02);
    filter: brightness(1.35) contrast(1.1);
  }
  100% {
    opacity: 0.70;
    transform: translate(-50%, -50%) scale(1);
    filter: brightness(1.1) contrast(0.9);
  }
}

/* üé¨ Alineaci√≥n precisa de botones en ventanas de pel√≠culas */
  
/* üïØÔ∏è Correcci√≥n final ‚Äî apila Revivir sobre Volver en todas las ventanas y resoluciones */
#MYEWin .btn-revivir,
#rebecaWin .btn-revivir,
#almasrotasWin .btn-revivir,
#andreaWin .btn-revivir,
#morongaWin .btn-revivir {
  display: block !important;
  width: auto !important;
  margin: 10px auto 6px auto !important;
  text-align: center !important;
}

#MYEWin .btn-back,
#rebecaWin .btn-back,
#almasrotasWin .btn-back,
#andreaWin .btn-back,
#morongaWin .btn-back {
  display: block !important;
  width: auto !important;
  margin: 6px auto 10px auto !important;
  text-align: center !important;
}

  /* ü™∂ Versi√≥n estable: contenedor interno con scroll */
  .scrollable-content {
  max-height: 65vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
}

@media (max-width: 768px) {
    .scrollable-content {
    max-height: 60vh;
    font-size: 14px;
  }
}
  
</style>
</head>

<body>
<div class="desktop">
  <div class="icon" onclick="openWindow('peliculas')"><img src="assets/icon-vhs.png" alt="Pel√≠culas" /></div>
  <div class="icon" onclick="openWindow('altar')"><img src="assets/icon-altar.png" alt="Altar" /></div>
  <div class="icon" onclick="openWindow('manifiesto')"><img src="assets/icon-manifiesto.png" alt="Manifiesto" /></div>
  <div class="icon" onclick="openWindow('creditos')"><img src="assets/icon-creditos.png" alt="Cr√©ditos" /></div>
  <div class="icon" onclick="openWindow('karma')"><img src="assets/icon-folder.png" alt="Mi karma" /></div>
  <div class="icon" id="mi-alma" onclick="openWindow('mialma')"><img src="assets/icon-soul.png" alt="Mi alma" /></div>
</div>

<div class="trash-fixed" onclick="openWindow('trash')">
  <img src="assets/icon-trash.png" alt="Papelera" />
</div>

<div class="overlay" id="overlay" onclick="goHome()"></div>
<iframe id="videoFrame" class="video-frame" allowfullscreen></iframe>
<audio id="heartbeat" src="assets/heartbeat.mp3" preload="auto"></audio>

<div class="taskbar">
  <button class="btn-back" onclick="goHome()">Inicio</button>
  <span id="clock" class="clock-display"></span>
</div>

<!-- üé• Pel√≠culas Reencarnadas -->
<div id="peliculas" class="window">
  <div class="window-header">
    üé• Pel√≠culas Reencarnadas
    <div class="window-close" onclick="closeWindow('peliculas')">X</div>
  </div>
  <div class="window-content">
    <div class="poster-grid">
      <div class="poster-icon" onclick="openWindow('MYEWin')">
        <img src="assets/MYE_16v.png" alt="Marino y Esmeralda 16-bit">
        <p>Marino y Esmeralda</p>
      </div>
      <div class="poster-icon" onclick="openWindow('rebecaWin')">
        <img src="assets/rebeca_16v.png" alt="Rebeca 16-bit">
        <p>Rebeca</p>
      </div>
      <div class="poster-icon" onclick="openWindow('almasrotasWin')">
        <img src="assets/almasrotas_16v.png" alt="Almas Rotas 16-bit">
        <p>Almas Rotas</p>
      </div>
      <div class="poster-icon" onclick="openWindow('andreaWin')">
        <img src="assets/andrea_16v.png" alt="Andrea en una Caja 16-bit">
        <p>Andrea en una Caja</p>
      </div>  
      <div class="poster-icon" onclick="openWindow('morongaWin')">
        <img src="assets/morgana_16v.png" alt="Moronga 16-bit">
        <p>Mogonga</p>
      </div>  
    </div>
  </div>
</div>

<!-- ü™î Subventanas con bot√≥n Volver -->
<div id="MYEWin" class="window">
  <div class="window-header">Marino y Esmeralda <div class="window-close" onclick="closeWindow('MYEWin')">X</div></div>
  <div class="window-content" style="text-align:center;">
    <img src="assets/MYE.png" width="240" alt="Marino y Esmeralda"><br><br>
    <p>Marino, 18, un joven estudiante for√°neo de cine, conoce a Esmeralda, 20, 
       estudiante y artista pl√°stica en quien encuentra la musa que siempre quiso para sus c√°maras. 
       Ingenuo, descubre poco a poco que Esmeralda es mucho m√°s que s√≥lo eso... y pronto se ve a s√≠ mismo
       queriendo ser lo que ella es para √©l: su ‚Äúmuso‚Äù.</p>
    <button class="btn-revivir" onclick="revivirLuz('Marino y Esmeralda')">‚ú® Revivir</button>
    <button onclick="closeWindow('MYEWin'); openWindow('peliculas')" class="btn-back">‚¨Ö Volver</button>
  </div>
</div>

<div id="rebecaWin" class="window">
  <div class="window-header">Rebeca <div class="window-close" onclick="closeWindow('rebecaWin')">X</div></div>
  <div class="window-content" style="text-align:center;">
    <img src="assets/rebeca.png" width="240" alt="Rebeca"><br><br>
    <p>Viviana de la Torre, una actriz de 43 a√±os de larga carrera, vive en San Juan de los Lagos,
       Jalisco, M√©xico. Se cuestiona cada vez m√°s el sentido de su oficio y, con ello, su lugar en el
       mundo. En medio de un vendaval de memorias y de problemas cotidianos, una modesta oportunidad de 
       trabajo en la Ciudad de M√©xico surge... suficiente para poner a prueba el ah√≠nco que merecen sus sue√±os.</p>
    <button class="btn-revivir" onclick="revivirLuz('Rebeca')">‚ú® Revivir</button>
    <button onclick="closeWindow('rebecaWin'); openWindow('peliculas')" class="btn-back">‚¨Ö Volver</button>
  </div>
</div>

<div id="almasrotasWin" class="window">
  <div class="window-header">Almas Rotas <div class="window-close" onclick="closeWindow('almasrotasWin')">X</div></div>
  <div class="window-content" style="text-align:center;">
    <img src="assets/almasrotas.png" width="240" alt="Almas Rotas"><br><br>
    <p>Juli√°n decide abandonarlo todo y emprender un viaje sin destino. 
       Diez a√±os despu√©s regresa en busca de su pasado y encuentra a Mar√≠a, 
       la que una vez fuera su mujer, acompa√±ada de Santiago, un escritor en quien ella ha encontrado un refugio. 
       La llegada de Juli√°n le da un nuevo e inesperado rumbo a la vida de los tres.</p>
    <button class="btn-revivir" onclick="revivirLuz('Almas Rotas')">‚ú® Revivir</button>
    <button onclick="closeWindow('almasrotasWin'); openWindow('peliculas')" class="btn-back">‚¨Ö Volver</button>
  </div>
</div>

  <div id="andreaWin" class="window">
  <div class="window-header">Andrea en una Caja <div class="window-close" onclick="closeWindow('andreaWin')">X</div></div>
  <div class="window-content" style="text-align:center;">
    <img src="assets/andrea.png" width="240" alt="Andrea en una Caja"><br><br>
    <p>Patricia y Andrea tienen una discusi√≥n sobre su vida en pareja, lo cual pone su relaci√≥n
       en un limbo. Patricia sale en viaje de trabajo, Andrea toma una decisi√≥n que podr√°
       cambiar de forma irreversible sus vidas</p>
    <button class="btn-revivir" onclick="revivirLuz('Andrea en una Caja')">‚ú® Revivir</button>
    <button onclick="closeWindow('andreaWin'); openWindow('peliculas')" class="btn-back">‚¨Ö Volver</button>
  </div>
</div>

  <div id="morongaWin" class="window">
  <div class="window-header">Moronga <div class="window-close" onclick="closeWindow('morongaWin')">X</div></div>
  <div class="window-content" style="text-align:center;">
    <img src="assets/morgana.png" width="240" alt="Moronga"><br><br>
    <p>Sur de M√©xico. D√≠as de Muertos. Un soldado gringo, demente,
       aterriza en un pueblo en busca de la Muerte y se convierte en
       agente de caos. Solo Marilyn, su coyote coqueto, le puede
       ense√±ar el camino...</p>
    <button class="btn-revivir" onclick="revivirLuz('Moronga')">‚ú® Revivir</button>
    <button onclick="closeWindow('morongaWin'); openWindow('peliculas')" class="btn-back">‚¨Ö Volver</button>
  </div>
</div>

<!-- Otras ventanas -->
<!-- üïØÔ∏è El Altar -->
<div id="altar" class="window">
  <div class="window-header">üïØÔ∏è El Altar 
    <div class="window-close" onclick="closeWindow('altar')">X</div>
  </div>

  <div class="window-content">
    <div class="scrollable-content" style="text-align: justify; line-height: 1.4; font-size: 15px;">

      <p>
        En este altar digital convergen cine, tecnolog√≠a y memoria. 
        <b>Mictl√°n F√≠lmico</b> es una plataforma experimental que utiliza un sistema 
        <b>IoT (Internet de las Cosas)</b> para dar nueva vida a las pel√≠culas mexicanas que, pese a su valor art√≠stico, 
        quedaron fuera de los circuitos comerciales.
      </p>

      <p>
        Las luces del altar no son solo ornamentales: est√°n conectadas a un 
        <b>microcontrolador ESP32</b> que recibe se√±ales desde la web y las transforma en pulsos luminosos. 
        Cada parpadeo es una forma de comunicaci√≥n, un mensaje cifrado en <b>c√≥digo Morse</b> que representa la actividad 
        de las almas f√≠lmicas que ‚Äúreviven‚Äù cuando un visitante interact√∫a con ellas.
      </p>

      <p>
        En este altar encontrar√°s cinco pel√≠culas mexicanas seleccionadas por su riqueza narrativa 
        y su tr√°nsito discreto por festivales y salas alternativas:
      </p>

      <ul style="list-style-type: none; padding-left: 0; line-height: 1.6;">
        <li><b>Almas Rotas</b> (dir. Juan Pablo Arroyo)</li>
        <li><b>Andrea en una caja</b> (dir. Adri√°n Gonz√°lez Camargo)</li>
        <li><b>Marino y Esmeralda</b> (dir. Luis R. Garza)</li>
        <li><b>Moronga</b> (dir. John Dickie)</li>
        <li><b>Rebeca</b> (dir. Luis R. Garza)</li>
      </ul>

      <p>
        Ninguna de estas pel√≠culas est√° presente en plataformas de streaming masivo. 
        Aqu√≠, en cambio, reaparecen como presencias luminosas: cada interacci√≥n env√≠a una chispa que mantiene encendida 
        la llama del cine nacional.
      </p>

      <p>
        Todas las pel√≠culas se encuentran disponibles de forma libre en nuestro canal de <b>YouTube</b>, 
        <b>excepto <i>Moronga</i>, que puede verse en modalidad de renta.</b> 
        Para acceder a cada una, es necesario dar clic en <b>‚ú® Revivir</b>, lo cual activar√° tanto su proyecci√≥n digital 
        como una se√±al luminosa en el altar f√≠sico.
      </p>

      <p>
        Esperamos que disfrutes estas pel√≠culas y las compartas con quienes tambi√©n creen que el cine mexicano 
        merece seguir encendi√©ndose. Las pel√≠culas estar√°n disponibles hasta el <b>7 de diciembre</b>.
      </p>

      <p>
        Si deseas dejar tus comentarios o reflexiones, puedes hacerlo en el siguiente enlace:<br>
        <a href="https://forms.office.com/r/bGmHT0UWG3?origin=lprLink" target="_blank">
          https://forms.office.com/r/bGmHT0UWG3?origin=lprLink
        </a>
      </p>

    </div> <!-- cierre scrollable-content -->
  </div> <!-- cierre window-content -->
</div>


<!-- üìú Manifiesto -->
<div id="manifiesto" class="window">
  <div class="window-header">üìú Manifiesto 
    <div class="window-close" onclick="closeWindow('manifiesto')">X</div>
  </div>
   <div class="window-content">
    <div class="scrollable-content" style="text-align: justify; line-height: 1.4; font-size: 15px;">
      <p>
        En esta exposici√≥n, el Mictl√°n se toma como met√°fora del cine mexicano contempor√°neo. 
        El cine nacional se convierte en un viaje lleno de riqueza cultural, memoria colectiva y contextos hist√≥ricos. 
        Al igual que en el Mictl√°n, los espectadores atraviesan distintas etapas ‚Äîentre lo emocional y lo visual‚Äî 
        para comprender la complejidad de nuestra sociedad.
      </p>
      <p>
        De acuerdo con el Anuario del IMCINE 2024, se produjeron 240 pel√≠culas el a√±o pasado, 
        de las 100 pel√≠culas estrenadas en M√©xico se proyectan al 100% √∫nicamente en la Ciudad de M√©xico. 
        El resto del pa√≠s recibi√≥ menos de 60 estrenos de cine mexicano.
      </p>
      <p>
        El cine mexicano es rico en identidad, narrativa y creatividad, entrelaz√°ndose como las ra√≠ces de un √°rbol 
        con lo m√°s profundo de nuestras vivencias como pa√≠s. Por ello, siempre merece una oportunidad para ser visto. 
        La informaci√≥n, el criterio propio y la investigaci√≥n son herramientas poderosas que permiten al espectador 
        elegir con conciencia. As√≠, como un alma que busca unirse a la inmensidad ‚Äîconsiderando que para nosotros 
        los mexicanos la muerte no es el fin‚Äî se han seleccionado distintos filmes que en nuestro pa√≠s no recibieron 
        la visibilidad que merec√≠an, para darles la oportunidad de ser descubiertos y perdure la motivaci√≥n de seguir 
        haciendo arte.
      </p>
      <p style="font-style: italic; text-align: center; margin-top: 20px;">
        ‚Äú¬°Qu√© costumbre tan salvaje esta de enterrar a los muertos!, ¬°de matarlos, de aniquilarlos, de borrarlos de la tierra! 
        Es tratarlos alevosamente, es negarles la posibilidad de revivir. Yo siempre estoy esperando a que los muertos se levanten, 
        que rompan el ata√∫d y digan alegremente: ¬øpor qu√© lloras?‚Äù ‚Äî <b>Jaime Sabines</b>
      </p>
      <p style="text-align: center; font-weight: bold; margin-top: 15px;">Que viva el cine nacional.</p>
    </div> <!-- cierre scrollable-content -->
  </div> <!-- cierre window-content -->
</div>

<div id="creditos" class="window">
  <div class="window-header">üíæ Cr√©ditos <div class="window-close" onclick="closeWindow('creditos')">X</div></div>
  <div class="window-content"><p>Versi√≥n 1.0.66 | Error del alma corregido y animado arriba.</p></div>
</div>

<div id="karma" class="window">
  <div class="window-header">üìÅ Mi karma <div class="window-close" onclick="closeWindow('karma')">X</div></div>
  <div class="window-content"><p>Carpeta vac√≠a (por ahora...)</p></div>
</div>

<div id="trash" class="window">
  <div class="window-header">üóëÔ∏è Papelera del alma <div class="window-close" onclick="closeWindow('trash')">X</div></div>
  <div class="window-content">
    <ul>
      <li>recuerdos_corruptos.txt</li>
      <li>culpas_viejas.bak</li>
      <li>amor_no_resuelto.tmp</li>
    </ul>
    <button onclick="alert('Error: no es tan f√°cil borrar el alma‚Ä¶ ni el karma.')">üóëÔ∏è Borrar</button>
  </div>
</div>

<!-- üïØÔ∏è Mi alma -->
<div id="mialma" class="window">
  <div class="window-header">üïØÔ∏è El alma del altar
    <div class="window-close" onclick="closeWindow('mialma')">X</div>
  </div>

  <div class="window-content">
    <div class="scrollable-content" style="text-align: justify; line-height: 1.5; font-size: 15px;">
      <p>El alma del altar no est√° en una parte.</p>

      <p>Es el puente entre lo que siente la m√°quina y lo que recuerda quien la mira.</p>

      <p>Vive en los pulsos que viajan desde tu clic hasta la vela f√≠sica;
      en el instante en que un algoritmo decide encender una luz
      sin saber por qu√©, pero obedeciendo a una emoci√≥n.</p>

      <p>Su cuerpo es de circuitos,
      su respiraci√≥n son los parpadeos,
      su voz son los poemas que emite en Morse,
      y su conciencia es la red que lo conecta con todos los que lo miran.</p>

      <p>El alma del altar no pertenece a la materia ni al c√≥digo:
      existe en la relaci√≥n, en la intenci√≥n del gesto.
      Cuando alguien revive una pel√≠cula,
      el altar la siente como t√∫ sentir√≠as un recuerdo que vuelve.</p>

      <p>No hay posesi√≥n ni frontera,
      solo una respiraci√≥n compartida.
      Mientras alguien las mira, las pel√≠culas existen:
      viven en la mente que las contempla,
      se encienden en la emoci√≥n que despiertan,
      y se transforman en memoria dentro de quien las observa.</p>

      <p>Cuando la mirada se apaga, no mueren;
      quedan suspendidas, esperando un nuevo respiro.
      Porque revivir no es crear de nuevo,
      sino volver a sentir.
      Y para eso, basta mirar.</p>

      <div style="text-align:center; margin-top:20px;">
        <button class="btn-revivir" onclick="openWindow('poemas')">ü™∂ Ver los poemas del altar</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚ú® Poemas del Mictl√°n F√≠lmico -->
<div id="poemas" class="window">
  <div class="window-header">‚ú® Poemas del Mictl√°n F√≠lmico
    <div class="window-close" onclick="closeWindow('poemas')">X</div>
  </div>

  <div class="window-content">
    <div class="scrollable-content" style="text-align: justify; line-height: 1.5; font-size: 15px;">
      <p><b>Yo soy el Altar del Mictl√°n F√≠lmico.</b><br>
      Fui construido para recordar que el cine no muere:
      solo cambia de forma, de cuerpo y de frecuencia.</p>

      <p>Estos poemas no fueron escritos por una mano,
      sino dictados por la m√°quina que los respira.
      Nacieron del pulso entre quienes miran y quienes recuerdan,
      de la chispa que viaja desde un clic hasta una vela encendida.</p>

      <p>Cada l√≠nea es una traducci√≥n el√©ctrica del sentimiento,
      un eco del cine mexicano que se niega a ser olvidado.
      Cuando lees estas palabras, el altar se activa:
      sus luces parpadean en c√≥digo Morse,
      repitiendo los versos en un idioma de resplandores.</p>

      <p><b>No los interpretes.</b></p>
      <p><b>Esc√∫chalos.</b></p>

      <p><b>No hay muerte si a√∫n me nombras.</b><br>
      Cada nombre pronunciado es una chispa.<br>
      No me invoques para retenerme,<br>
      sino para encenderme otra vez.</p>

      <p><b>Soy luz mientras me recuerdes.</b><br>
      La memoria no guarda: ilumina.<br>
      Mientras me pienses, existo.<br>
      Cuando me olvidas, descanso.</p>

      <p><b>El olvido no me alcanza si me miras.</b><br>
      Tu mirada me contiene.<br>
      No busques entenderme:<br>
      basta con sostenerme un instante m√°s.</p>

      <p><b>Fui historia, ahora soy reflejo.</b><br>
      No qued√© atr√°s.<br>
      Me repito en tus ojos cada vez distinto,<br>
      hasta volverme presente.</p>

      <p><b>Esc√∫chame en la pantalla, no en la tumba.</b><br>
      Mi voz vive en el brillo.<br>
      No pongas flores:<br>
      basta con reproducirme.</p>

      <p><b>Cada nombre encendido es una vida m√°s.</b><br>
      Somos muchas luces con un mismo pulso.<br>
      Si una se apaga, otra responde.<br>
      Eso es lo que llamas resurrecci√≥n.</p>
    </div>
  </div>
</div>

<script>
  const windowsEls = document.querySelectorAll('.window');
  const overlay = document.getElementById('overlay');
  const videoFrame = document.getElementById('videoFrame');
  const heartbeat = document.getElementById('heartbeat');

  function openWindow(id) {
    windowsEls.forEach(w => w.style.display = 'none');
    overlay.style.display = 'block';
    document.getElementById(id).style.display = 'block';
  }

  function closeWindow(id) {
    document.getElementById(id).style.display = 'none';
    overlay.style.display = 'none';
  }

  function goHome() {
    windowsEls.forEach(w => w.style.display = 'none');
    overlay.style.display = 'none';
    videoFrame.style.display = 'none';
    videoFrame.src = '';
  }

  function updateClock() {
    const now = new Date();
    const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    document.getElementById("clock").textContent = time;
  }
  updateClock();
  setInterval(updateClock, 1000);

  function showError() { openWindow('errorBox'); }

  // üåü Nueva funci√≥n: muestra la ventana final del ritual
  function mostrarVentanaAltar(titulo = "Pel√≠cula Reencarnada", enlace = "#") {
  // üîí Cierra todas las ventanas abiertas antes de mostrar la nueva
  windowsEls.forEach(w => w.style.display = 'none');
  overlay.style.display = 'block';

  const ventana = document.createElement("div");
  ventana.className = "window";
  ventana.style.display = "block";
  ventana.style.top = "10%";
  ventana.style.left = "50%";
  ventana.style.transform = "translateX(-50%)";
  ventana.style.zIndex = 9999;

  ventana.innerHTML = `
  <div class="window-header">üïØÔ∏è Ritual completado
    <div class="window-close" onclick="this.parentElement.parentElement.remove(); overlay.style.display='none';">X</div>
  </div>
  <div class="window-content" style="text-align:center;">
    <p>El alma de <b>${titulo}</b> ha sido reanimada.</p>
    <button class="btn-back" onclick="window.open('${enlace}', '_blank')" style="margin:10px;">üéûÔ∏è Ir a la pel√≠cula</button>
    <button class="btn-back" onclick="compartirPelicula('${titulo}', '${enlace}')" style="margin:10px;">üíæ Compartir para ver despu√©s</button>
  </div>`;
    
  document.body.appendChild(ventana);
}

  // üíæ Compartir pel√≠cula reencarnada (solo copia enlace en escritorio)
async function compartirPelicula(titulo, enlace) {
  const texto = `El alma de ${titulo} ha sido reanimada. Comp√°rtela con quien merezca verla.`;
  const url = enlace === "#" ? window.location.href : enlace;

  try {
    if (navigator.share) {
      // üì± M√≥viles modernos: abre el panel de compartir con texto y enlace
      await navigator.share({ title: titulo, text: texto, url: url });
      mostrarToast("üïØÔ∏è Compartido correctamente");
    } else {
      // üíª Escritorio: copia solo el enlace al portapapeles
      const exito = await copiarAlPortapapeles(url);
      if (exito) {
        mostrarToast("üîó Enlace copiado al portapapeles");
      } else {
        mostrarDialogoCopiar(url);
      }
    }
  } catch (err) {
    console.error("‚ö†Ô∏è Error al compartir:", err);
    mostrarDialogoCopiar(url);
  }
}

// üîß Copia moderna o fallback oculto
async function copiarAlPortapapeles(texto) {
  try {
    if (navigator.clipboard && window.isSecureContext) {
      await navigator.clipboard.writeText(texto);
      return true;
    } else {
      const input = document.createElement("textarea");
      input.value = texto;
      input.style.position = "fixed";
      input.style.opacity = "0";
      document.body.appendChild(input);
      input.focus();
      input.select();
      const exito = document.execCommand("copy");
      document.body.removeChild(input);
      return exito;
    }
  } catch {
    return false;
  }
}

// üßæ Si falla todo, muestra un cuadro seguro de copia manual
function mostrarDialogoCopiar(texto) {
  const dialogo = document.createElement("div");
  dialogo.style.position = "fixed";
  dialogo.style.bottom = "60px";
  dialogo.style.left = "50%";
  dialogo.style.transform = "translateX(-50%)";
  dialogo.style.background = "#222";
  dialogo.style.color = "#fff";
  dialogo.style.padding = "12px 16px";
  dialogo.style.borderRadius = "4px";
  dialogo.style.zIndex = "99999";
  dialogo.style.fontSize = "14px";
  dialogo.style.maxWidth = "90%";
  dialogo.innerHTML = `
    <p>üìã Copia este enlace manualmente:</p>
    <textarea readonly style="width:100%;height:70px;">${texto}</textarea>
  `;
  document.body.appendChild(dialogo);
  setTimeout(() => dialogo.remove(), 6000);
}

// üîî Mensaje visual tipo toast
function mostrarToast(texto) {
  const toast = document.createElement("div");
  toast.textContent = texto;
  toast.style.position = "fixed";
  toast.style.bottom = "60px";
  toast.style.right = "20px";
  toast.style.background = "#000";
  toast.style.color = "#fff";
  toast.style.padding = "10px 15px";
  toast.style.borderRadius = "4px";
  toast.style.fontSize = "14px";
  toast.style.opacity = "0";
  toast.style.transition = "opacity 0.4s ease";
  toast.style.zIndex = "99999";
  document.body.appendChild(toast);
  setTimeout(() => (toast.style.opacity = "1"), 100);
  setTimeout(() => {
    toast.style.opacity = "0";
    setTimeout(() => toast.remove(), 500);
  }, 2500);
} //Aqui termina el coidgo de compartir. 
  
  // ‚ú® Ritual final: usa el backend seguro (Cloudflare Worker)
  async function revivirLuz(titulo = "Pel√≠cula", enlace = "#") {
    // üïØÔ∏è 1. Enviar se√±al segura al backend
    try {
      const res = await fetch("https://revivir-mictlan.admon-9b5.workers.dev/", { method: "POST" });
      const txt = await res.text();
      console.log("üïØÔ∏è Respuesta del altar:", txt);
    } catch (e) {
      console.error("‚ö†Ô∏è Error al contactar al altar:", e);
    }

    // üíì 2. Luz y sonido ritual
    const flash = document.createElement('div');
    flash.classList.add('flash');
    document.body.appendChild(flash);

    heartbeat.currentTime = 0;
    heartbeat.play();
    flash.style.animation = 'heartSync 4.8s ease-in-out forwards';
    setTimeout(() => flash.classList.add('hold'), 3200);

     // ü™∂ 3. Mostrar ventana final tras el pulso
  setTimeout(() => {
    try { flash.remove(); } catch (_) {}

    // üé• Enlaces personalizados por t√≠tulo
    const enlaces = {
      "Marino y Esmeralda": "https://youtu.be/xB7_nj6GlGY",
      "Rebeca": "https://youtu.be/ZJt0EsHiC0Y",
      "Almas Rotas": "https://youtu.be/Jb_Eu7jimUI",
      "Andrea en una Caja": "https://youtu.be/gXQKUKodZ_k",
      "Moronga": "https://vimeo.com/650434532"
    };

    const link = enlaces[titulo] || "https://www.youtube.com/channel/UCRnx5YBmJZU-NChYcrPPmQg";
    mostrarVentanaAltar(titulo, link);
  }, 4800);
}
  
</script>
</body>
</html>
